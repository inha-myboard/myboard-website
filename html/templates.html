<script type="text/x-handlebars-tpl" id="widget-wrapper">
	{{#with widget.props_json}}
	<div class="grid-stack-item"
							data-gs-x="{{bound.x}}" data-gs-y="{{bound.y}}"
							data-gs-width="{{ifnull bound.width 4}}" data-gs-height="{{ifnull bound.height 4}}" data-gs-no-resize="yes" data-gs-no-move="yes" data-gs-auto-position="1">
		<div class="grid-stack-item-content">
			<div class="box " {{#if border-top-color}}style="border-top-color: {{border-top-color}};"{{/if}}>
			{{/with}}
				<div class="box-header with-border">
					<h3 class="box-title">{{widget.caption}}</h3>
					<div class="box-tools pull-right">
						<button type="button" class="btn btn-box-tool" data-widget="remove" style="display: none;"><i class="fa fa-times"></i></button>
					</div>
				</div>

				<div class="box-body">
					{{> (join '-' 'widget' 'partial' (lookup widget 'type'))}}
				</div>
				<div class="scroll-bar"></div>
			</div>
		</div>
	</div>
</script>

<script type="text/x-handlebars-ptl" id="widget-partial-single">
	<table class="table no-margin">
		{{#with widget.mapping_json}}
		{{#if headers}}
		<thead>
			<tr>
				{{#each headers}}
				<th {{#if width}}width="{{width}}"{{/if}}>{{caption}}</th>
				{{/each}}
			</tr>
		</thead>
		{{/if}}
		{{/with}}
		<tbody>
			{{#each data}}
			<tr>
				{{#each @root.widget.mapping_json.fields}}
					{{> widget-partial-tag tag='td' content=(include 'widget-partial-data' (lookup .. (lookup . 'api_path')))}}
				{{/each}}
			</tr>
			{{/each}}
		</tbody>
	</table>
</script>

<script type="text/x-handlebars-ptl" id="widget-partial-composite">
	{{#each data}}
	<table class="table composite" style="display: inline">
		<tbody>
			<tr>
				{{#with @root.widget.mapping_json}}
				{{#xif 'this.fields_position == "left"'}}
				<!-- left side -->
				<td><table class="table no-margin">
					{{#each @root.widget.mapping_json.fields}}
						<tr {{#if @first}} style="border-top:0px;"{{/if}}>{{> widget-partial-tag tag='td' content=(include 'widget-partial-data' (lookup ../.. (lookup . 'api_path')))}}</tr>
					{{/each}}
				</table></td>
				{{/xif}}
				{{/with}}

				<!-- main field -->
				{{#with @root.widget.mapping_json.main_field}}
				{{> widget-partial-tag tag='td' content=(include 'widget-partial-data' (lookup .. (lookup . 'api_path')))}}
				{{/with}}

				{{#with @root.widget.mapping_json}}
				{{#xif 'this.fields_position == "right"'}}
				<!-- right side -->
				<td><table class="table no-margin">
					{{#each @root.widget.mapping_json.fields}}
						<tr{{#if @first}} style="border-top:0px;"{{/if}}>{{> widget-partial-tag tag='td' content=(include 'widget-partial-data' (lookup ../.. (lookup . 'api_path')))}}</tr>
					{{/each}}
				</table></td>
				{{/xif}}
				{{/with}}
			</tr>

			{{#with @root.widget.mapping_json}}
			{{#xif 'this.fields_position == "bottom"'}}
			<!-- bottom side -->
			{{#each @root.widget.mapping_json.fields}}
				<tr>{{> widget-partial-tag tag='td' content=(include 'widget-partial-data' (lookup ../.. (lookup . 'api_path')))}}</tr>
			{{/each}}
			{{/xif}}
			{{/with}}
		</tbody>
	</table>
	{{/each}}
</script>

<!-- Segment Tag 렌더링 -->
<script type="text/x-handlebars-ptl" id="widget-partial-tag">
	<{{tag}} {{#if class}} class="{{#each class}}{{this}} {{/each}}"{{/if}} {{#if style}} style="{{#each style}}{{@key}}: {{this}};{{/each}}"{{/if}}>{{{content}}}</{{tag}}>
</script>
<!-- Segment 데이터 렌더링 -->
<script type="text/x-handlebars-ptl" id="widget-partial-data">
	{{#if href}}
		<a href="{{href}}">
	{{/if}}
	{{#xif 'this.type == "text"'}}
		{{text}}
	{{/xif}}
	{{#xif 'this.type == "img"'}}
		<img src="{{src}}" style="width: inherit;"/>
	{{/xif}}
	{{#if href}}
		</a>
	{{/if}}
</script>

<script type="text/x-handlebars-tpl" id="table-manage-api">
	<table class="table table-bordered" id="apiTable">
	    <tr class="clickable-row">
	        <th>ID</th>
	        <th>URL</th>
	        <th>Body Selector</th>
	        <th>Maker</th>
	        <th>Created Date</th>
	    </tr>
	    <tr class="clickable-row">
	    
	    </tr>
	</table>
</script>

<script type="text/x-handlebars-tpl" id="widget-mapping-single">
	<p>Segment Mapping</p>
	<table class="table no-margin">
		{{#with mapping_json}}
		<tbody>
			<tr>
			{{#each fields}}
				<td class="segment" data-segment="{{api_path}}"></td>
			{{/each}}
			</tr>
		</tbody>
		{{/with}}
	</table>
</script>

<script type="text/x-handlebars-tpl" id="widget-mapping-composite">
	<table class="table composite">
		<tbody>
			<tr>
				{{#with mapping_json}}
				{{#xif 'this.fields_position == "left"'}}
				<!-- left side -->
				<td>
					<table class="table no-margin">
						{{#each @root.widget.mapping_json.fields}}
						<tr><td data-segment="" class="segment"></td></tr>
						{{/each}}
					</table>
				</td>
				{{/xif}}

				<!-- main field -->
				<td class="main-field"></td>

				{{#xif 'this.fields_position == "right"'}}
				<!-- right side -->
				<td><table class="table no-margin">
					{{#each fields}}
						<tr><td data-segment="" class="segment"></td></tr>
					{{/each}}
				</table></td>
				{{/xif}}
			</tr>

			{{#xif 'this.fields_position == "bottom"'}}
			<!-- bottom side -->
			{{#each fields}}
				<tr><td data-segment=""></td></tr>
			{{/each}}
			{{/xif}}
			{{/with}}
		</tbody>
	</table>
	{{/each}}
</script>



<script type="text/x-handlebars-tpl" id="segments-mapping">
	<p>Mapping</p>
	<table class="table no-margin">
		<tbody>
			{{#each segments}}
			<tr>
				<td class="clickable-row">
					{{name}}
				</td>
			</tr>
			{{/each}}
		</tbody>
	</table>
</script>

<script type="text/x-handlebars-tpl" id="single-props">
	<div id="singleHeaderProps" class="form-group">
		<label class="checkbox-inline"><input  id="singleHeaderCheck" name="singleHeaderCheck" type="checkbox" value="1" checked>Headers</label>
		<table class="table no-margin">
			<tbody>
				<tr>
					{{#each mapping_json.headers}}
					<td>
						<input type="text" value="{{caption}}" class="form-control" name="header_{{caption}}">
					</td>
					{{/each}}
				</tr>
			</tbody>
		</table>
	</div>
</script>
